<p align="center" width="100%">
     <img width="99%" src="https://github.com/wnaely/LOL_EDA/assets/130523834/eb619d22-7723-41df-ac65-69c98bda1a64">
     </p>
     

# ⚔ LoL Win-Loss Prediction 🏆
### <b>리그 오브 레전드(LoL)</b> 게임 데이터를 활용한 승패 예측 모델 개발


# 1. 개 요


<h5><p align="center" width="100%">
     <img width="45%" src="https://github.com/wnaely/LOL_EDA/assets/130523834/9783dd92-ef52-4a33-b449-8002894144b6">
     <img width="54%" src="https://github.com/wnaely/LOL_EDA/assets/130523834/dc9b0604-e098-4fa7-9936-978a5e09f20f"> <br>
     ( 좌: <a href="https://www.thelog.co.kr/report/reportView.do?nSeq=265">23년 11월 PC방 주간 점유율 순위</a> ) /   
     ( 우: <a href="https://pgr21.com/free2/72613">중국 제외 37개국 PC게임 MAU 통계</a> )</p></h5>
     
"League of Legends(이하 LoL)"는 Riot Games에서 개발한 인기 있는 온라인 게임으로, 전 세계적으로 많은 플레이어들이 즐기고 있다.
     이 게임은 전략과 팀워크가 필요한 멀티플레이어 배틀 아레나(MOBA) 장르의 게임이며, e-sports 산업에서 주목받는 콘텐츠로 자리매김하고 있다. LoL은 큰 영향력으로 2022년 항저우 아시안 게임에서 정식 종목으로 채택되었고, 그만큼 높은 성과를 보이고 있다.

Riot Games는 게임 자체의 재미뿐만 아니라 분석 가능한 다양한 게임 데이터를 무료로 제공하고 있다. 소환사 정보, 챔피언 정보, 게임 정보, 랭킹 및 리그 정보 등의 게임 데이터는 Riot Games의 API를 통해 접근할 수 있다. 이와 같이 제공되는 데이터는 소정의 절차를 거쳐 쉽게 접근 할 수 있고, 하루에 약 20만 건의 게임 데이터가 수집된다. 해당 데이터를 통해 통계적 분석과 게임에 대한 예측 모델 구축이 가능해진다.  

이번 프로젝트에서는 Riot Games API에서 제공하는 데이터를 활용하여, LoL 게임의 승패를 예측하는 모델을 개발하고자 한다. 이 모델은 플레이어의 게임 데이터를 입력으로 받아, 해당 게임의 승패를 예측한다. 이를 통해 플레이어는 자신의 게임 전략을 개선하는 데 도움을 받을 수 있으며, 승률 향상에 기여할 수 있다.
<!-- 또한 이 모델은 LoL 게임의 승패 패턴을 이해하고 그 내재된 메커니즘을 파악하는 데에도 도움이 될 것으로 기대된다. -->

<hr>


# 2. 데이터

## 2.1 데이터 소스
이번 프로젝트에 활용할 데이터는 온라인 게임 코칭 전문기업인 더매치랩(The Match LAB)에서 가공한 LoL 게임 데이터를 바탕으로 한다. 
데이터는 2023년 8월 25일, 9월 15일, 9월 17일 각각 하루 동안 수집된 LoL 경기에 대한 세부 항목들로 구성되어 있다.

## 2.2 탐색적 데이터 분석

<!-- * LOL 게임에 대한 간략한 설명 -->
리그 오브 레전드는 5명의 팀원으로 구성된 양 팀이 각자의 역할과 포지션에 따라 서로의 기지를 파괴하기 위해 치열한 사투를 벌이는 전략 게임이며, 게임의 기본적인 흐름은 아래와 같다.

<b>[ 시작 및 포지셔닝 ]</b>
  - 게임이 시작되면 5명의 팀원은 사전에 합의한 Top, Jungle, Mid, Bottom(ADC, SPT) 라인으로 흩어진다. 각 포지션은 고유한 역할을 가지고 있으며, 이를 잘 수행하는 것이 중요하다.
    
<b>[ 라인전 진행 ]</b>
- 각 라인에서는 상대편의 포탑을 철거하고, 아군의 포탑을 지키기 위해 상대편과 대치한다. 이 과정에서 적의 챔피언이나, 미니언을 처치하여 골드와 경험치를 얻는다.
  
<b>[ 포탑 파괴 ]</b>
-  상대편의 포탑을 파괴하면 아군의 공격로가 확장되며, 적의 기지를 향해 나아갈 수 있게 된다. 포탑을 파괴하는 것은 게임을 유리하게 진행시키는 중요한 부분이다.
  
<b>[ 넥서스(기지)를 파괴하여 승리 ]</b>
- 넥서스로 향한 길목에 위치한 포탑들을 모두 파괴하고, 마지막으로 상대편의 넥서스를 파괴하면 승리하게 된다.

데이터는 5대5 솔로 랭크 경기 약 20만 건으로 구성되어 있으며, 포지션별로 데이터가 구분되어 있다. 
5가지 포지션에 대한 내용은 다음과 같다.


<p align="center" width="100%">
     <img width="70%" src="https://github.com/wnaely/LOL_EDA/assets/130523834/3d87df29-d37f-4c16-be4b-a94b1438c8d5">
     </p>

  

| 포지션    |역할|
|--------|---|
| 탑(TOP) | 탑 라이너는 게임 맵의 상단에 위치하며, 주로 챔피언 간의 1대1 싸움에 특화되어 있다. 강인한 챔피언들이나 방어적인 챔피언들이 탑 라인에서 주로 플레이한다. |
| 정글(JUNGLE) | 정글러는 맵의 숲 지역을 돌아다니며 몬스터를 처치하고 팀원들을 지원한다. 또한 적군 정글러와의 교전에서 승리를 가져오는 역할을 한다. 정글러는 각 라인을 돕고 중요한 중립 몬스터들을 처치하여 경험치와 골드를 얻는다. |
| 미드(MID) | 미드 라이너는 맵의 중앙에 위치하며, 적과 아군 간의 중요한 교전이 일어나는 지점이다. 미드 라이너는 게임의 중반에 팀에 큰 영향을 미칠 수 있는 중요한 역할을 맡는다. |
| 원딜(AD Carry) | 원딜러는 주로 하프맵의 아래에 위치한 라인에서 플레이한다. 고사거나 원거리 공격력이 높은 챔피언으로, 게임의 후반에 팀에게 높은 데미지를 제공하는 역할을 한다. |
| 서포트(SUPPORT) | 서포터는 주로 원딜러와 함께 아래 라인에서 플레이하며, 팀원들을 지원하고 적에게 방해를 주는 역할을 한다. 힐링, 감속, CC(제어) 스킬 등을 통해 팀의 생존력을 높이고 원딜러에게 안전한 플레이를 가능하게 한다. |

제공된 데이터의 항목은 총 185개로 구성되어 있으며, 전반적으로 다음과 같은 내용으로 정리해 볼 수 있다.

| 항목             | 데이터 속성 |
|----------------|--------|
| 플레이어에 대한 데이터   |tier, cid, assists, deaths, kills, cs ...|
| 팀에 대한 데이터      | dragon, baron, goldearned, turretkills ... |
| 라인전 전후에 대한 데이터 | dpd_at14, gold_af14, kda_at14, solodill_af14 ... |

여기서 중요하게 고려되는 항목들은 다음과 같다. (10개 이상)

| 데이터 속성 | 데이터의 의미 | 중요한 이유 |
|-------------|--------------|-------------|
| visionscore | 시야 점수 |맵 컨트롤 능력을 나타내는 지표이다. 시야 점수가 높다는 것은 맵 전체를 잘 파악하고 있음을 의미하며, 이는 적의 움직임을 예측하고 전략을 세우는 데 도움이 된다. |
| kda | 킬/데스/어시스트 | 실력을 나타내는 일반적인 지표. 데미지 지표, 팀 킬 비율과 같이 보면 전투 스타일 및 더 정확한 실력을 파악할 수 있다. |
| xpm | 분 당 획득 경험치 | 데미지 및 시야 지표와 함께 사용해 레벨링과 관련된 이유를 파악할 수 있다. |
| goldearned | 총 획득 골드 | 챔피언의 성장을 나타내는 지표이다. 골드를 많이 획득하면 강력한 아이템을 구매할 수 있어 전투력이 증가한다. |
| deaths |  데스 수 | 챔피언의 생존력을 나타내는 지표이다. 데스가 적다는 것은 적절한 포지셔닝과 위험 감지 능력이 뛰어나다는 것을 의미한다. |
| dealt | 챔피언에게 넣은 데미지 | 챔피언의 생존력을 나타내는 지표이며, 데스가 적다는 것은 적절한 포지셔닝과 위험 감지 능력이 뛰어나다는 것을 의미한다. |
| cid | 챔피언 아이디 | 각 챔피언의 성능과 상대 챔피언과의 상성 등을 분석하는 데 사용된다.  |
| tower | 타워 파괴 횟수 | 타워를 파괴하는 것은 맵 컨트롤과 골드 획득에 중요하며, 승리로 이어질 가능성이 높다. |
| baron | 각 팀이 처치한 바론의 수 | 바론 버프는 게임의 흐름을 결정짓는 중요한 요소이므로, 바론을 얼마나 획득했는지 분석하는 것이 중요하다. |
| assists | 어시스트 수 | 팀 플레이의 중요성을 나타내는 지표이다. 어시스트가 많다는 것은 팀원 간의 협동이 잘 이루어져 있음을 의미하며, 이는 승리로 이어질 가능성이 높다. |
| dragon | 각 팀이 처치한 드래곤의 수 | 드래곤 버프는 팀의 전투력을 크게 향상시키므로, 드래곤을 얼마나 획득했는지 분석하는 것이 중요하다. |

   ### 2.3 데이터 전처리
20만 건의 경기 데이터는 수준 별로 편차가 어느정도 존재할 것으로 예상된다. 
따라서 일정 수준 이상의 데이터로 지표의 상관성을 통해 승패예측 모델을 만드는 것이 합리적일 것이다.

이에 이번 프로젝트에서는 다음과 같이 정의되는 LoL게임의 등급체계(tier)를 바탕으로, 모든 플레이어가 플래티넘 이상인 경기를 추출하여 분석해보고자 한다.

* 티어에 대한 정보
<p align="center" width="100%">
     <img width="70%" src="https://github.com/wnaely/LOL_EDA/assets/130523834/434c2849-d3a7-42d3-af24-84d511372a50">
     </p>

<details>
<summary>티어별 히스토그램</summary>
</details>
  
플래티넘 이상인 경기의 수
  
- <b>0825 - 44,962건</b>

- <b>0915 - 28,209건</b>

- <b>0917 - 25,208건</b>
<br>


도출된 플래티넘 이상의 경기에 대해서, 핵심 데이터 속성으로 'kda', 'dpd', 'dpm', 'dpg', 'dtpm' 등을 추출했다. 
전투관련 지표를 이용하여 분석을 진행해보려고 하기 때문에 핵심 데이터를 해당 데이터로 추출하였다.
그리고 승패를 예측하는 것이기 때문에, 경기 데이터를 기준으로 데이터 속성별 정규화(normalize)를 수행했다. 

   ### 2.4 데이터 프레임 설계
탐색적 데이터 분석과 데이터 전처리를 통해 다음과 같은 데이터 프레임을 만들고자 한다.

| Id  | 팀  | 주요지표 | TOP |MID|
|-----|-----|---------|-----|---|
| 고유번호 | Red/Blue | kda, dpd, ...| ... |...|
<hr>

## 3. 승패예측 모델

   ### 3.1 모델 개요
   CNN을 썼다. 단순한 합산을 썼다.

## 3.2 성능
|   |    |  정확도 | 
|---| ---| --------|
|0825|플래티넘↑|95%| 
|    | 전체 |93.6% |
|0915|Platinum↑| 93.4% |
|    | 전체  |90.3%|
|0917|플래티넘↑|88.4% |
|    |    전체  |86.2% |

플래티넘 이상 4.5만건
데이터 전체 20만건

<!--   ### 3.3 소결
* <b>성능에 대한 의미</b><br>


* <b>핵심 데이터 항목에 대한 추정 및 분석<b><br>
  프로젝트에서 주요하게 다뤘던 데이터 항목들은 소환사 정보, 챔피언 정보, 게임 정보, 랭킹 및 리그 정보 등이었다. 이러한 항목들을 통해 모델은 플레이어의 경험, 챔피언의 능력, 게임의 진행 상황, 플레이어의 순위 등을 파악하여 예측을 수행했다.

특히, 소환사의 행동 패턴, 특정 챔피언의 픽률 및 밴률, 게임의 초반과 후반에 따른 데이터의 중요성을 도출했다. 이를 통해 게임에서 승리하는 데 영향을 미치는 핵심적인 변수들을 확인하고 모델의 학습에 활용했습니다.

이러한 데이터 항목들의 추정과 분석을 통해 게임의 다양한 측면을 이해하고, 모델의 예측력을 개선하는 데 기여했습니다. 추후 프로젝트나 유사한 분야에서의 활용을 위해 이러한 데이터의 중요성과 영향을 보다 정교하게 이해할 수 있게 되었습니다. -->

<hr>

## 4. 결론 및 배운점

프로젝트를 통해 다량의 League of Legends 게임 데이터를 분석하고, 승패를 예측하는 모델을 개발하는 과정에서 데이터 과학 및 머신러닝 기술에 대한 이해와 경험이 증가했다.

LoL의 다양한 측면에 대한 데이터 분석을 통해 게임의 전략, 팀워크, 챔피언 간의 상호작용 등에 대한 깊은 이해를 얻었다. 이를 통해 게임의 복잡성을 이해하고, 플레이어들 간의 경쟁에서 중요한 영향을 미치는 요소들을 파악할 수 있었다.

Riot Games API를 사용하여 게임 데이터를 수집하는 과정을 배웠고, 해당 데이터를 활용해 분석하는 경험을 쌓았다. API를 통한 데이터 획득, 전처리, 모델 학습 등의 과정을 이해하고 활용할 수 있게 된 것이 중요한 점 중 하나이다.

개발한 승패 예측 모델의 성능을 평가하고, 모델의 강점과 약점을 파악하며 모델을 향상시키는 데 필요한 통계적 평가 기술에 대한 이해가 높아졌다.

<hr>
       
       
   ## References
   [01] https://www.thelog.co.kr/report/reportView.do?nSeq=265 <br>
   [02] https://pgr21.com/free2/72613 <br>

   




